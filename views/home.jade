extends layout

block content
  script(src="/javascripts/libs/dash.all.js")
  link(href="http://vjs.zencdn.net/4.12/video-js.css", rel="stylesheet")
  script(src="http://vjs.zencdn.net/4.12/video.js")
  script(src="/javascripts/libs/videojs-tech-dashjs.js")
  div#content
    video#videoStream(controls="true", autoplay, class="video-js vjs-default-skin", width="100%", height="700px")
      //- p(style=" color: #fff; font-size: 18px; font-family: bold")= msg
      //- div#left
      //-   div#channelTabs
      //-     ul 
      //-       each channel in channels
      //-         li
      //-           a(href="/?ch=#{channel.channelName}")= channel.channelName
      //- div#right
      //- div#comments
      //-   p Comments
  script.
    
    
  - if (typeof(videoInfo) !== 'undefined'){
    script.
      $(document).ready(function(){
        (function(){
          var fileId = "#{videoInfo.fileId}" || '';
          console.log('fileid', fileId);
          var url = "http://localhost:8080/uploads/"+fileId+"/_dash.mpd"; //link to mpd
          player = videojs('videoStream', { "url": url, "context": new Dash.di.DashContext(), "controls": true, "autoplay": true, "width": "100%", "height": "700px" }, function() {
            
            this.play(); // if you don't trust autoplay for some reason
            // How about an event listener?
            this.on('ended', function() {
              console.log('awww...over so soon?');
            });
            
            
          });
          setTimeout(function(){
            player.mediaPlayer.seek(parseInt("#{videoInfo.start}"))
              console.log('videoInfo.start', "#{videoInfo.start}");
            }, 1500)
          
              
        })();
      })
  -}
  - else
    script.
      player = videojs('videoStream', { "url": "", "context": new Dash.di.DashContext(), "controls": true, "autoplay": true, "width": "100%", "height": "700px" }, function() {
            
        // How about an event listener?
        this.on('ended', function() {
          console.log('awww...over so soon?');
        });
        
        
      });
  div#videoInfo
    h2 Video Info